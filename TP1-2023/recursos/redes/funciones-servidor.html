<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8"/>
        <meta name="description" content="Trabajo Practico 1 Servidor Web Simplificad"/>
        <meta name="robots" content="follow"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <title>Funciones del Servidor</title>
        <link rel="stylesheet" href="./css/index-styles.css">
    </head>

    <body>
        

        <h1 class="title">Funciones del servidor</h1>
       
        <div class="functions-indice">
            <h2>Tabla de funciones</h2>
            <ul>
                <li href="#">int setServer (Host *servidor, int puerto)</li>
                <li>int setSocket (int *sock)</li>
                <li>int setBind (Host *host)</li>
                <li>int setListen (Host host)</li>
                <li>bool initAccept (Host *server, Host *client)</li>
                <li>void salidaError (char *msg)</li>
                <li>void sig_chld ()</li>
            </ul>
        </div>

        <div class="functions">
            <h3>int setServer (Host *servidor, int puerto)</h3>
    
            <p>
                Función que se encarga de crear y configurar un socket. 
            </p>
            <p>
                <b>@Parametro *servidor:</b> la estructura que guardará el servidor creado y configurado.
            </p>
            <p>
                <b>@Parametro puerto:</b> el número de puerto donde el socket estará escuchando.
            </p> 
            <p>
                <b>@Salida:</b> devuelve 1 si hubo un error al setear el socket, retorna 3 si el error ocurrió al nombrarlo, un 4 si se trata de un error con el listen del socket, y finalmente un 0 si termina exitosamente.
            </p>
        </div>

        <div class="functions">
            <h3>int setSocket (int *sock)</h3>
            <p>
                Crea un socket de la familio TCP y lo guarda en lo apuntado por sock, controla los errores devolviendo 1 si fallo la creación. 
            </p>
            <p>
                <b>@parametro *sock:</b> hace referencia a donde se guardará el file descriptor de la función socket.
    
            </p>
            <p>
                <b>@Salida:</b> devuelve 0 si se creó el socket exitosamente sino 1.
            </p>
        </div>

        <div class="functions">
            <h3>int setBind (Host *host)</h3>
            <p>
                Esta función se encarga de nombrar a un socket asignándole un puerto y dirección IP. 
            </p>
            <p>
                <b>@Parametro *host:</b> socket que se le asigna IP y PUERTO.
    
            </p>
            <p>
                <b>@Salida:</b> si logra realizar el bind() retorna 0, si no retorna 1.
            </p>
        </div>

        <div class="functions">
            <h3>int setListen (Host host)</h3>
            <p>
                Asigna a un socket la cantidad de clientes pendientes que podrá encolar para atender.
            </p>
            <p>
                <b>@Parametro host:</b> socket que se le asigna la cantidad de clientes pendientes.
            </p>
            <p>
                <b>@Salida:</b> devuelve 0 si listen() se ejecutó exitosamente sino 1.
            </p>
        </div>
        

        <div class="functions">
            <h3>bool initAccept (Host *server, Host *client)</h3>
            <p>
                La función se encarga de esperar una petición de un cliente y establecer la conexión entre el cliente y el servidor.
            </p>
            <p>
                <b>@Parametro *servidor:</b> estructura que guarda información del servidor, el cual escuchará peticiones.
            </p>
            <p>
                <b>@Parametro *cliente:</b> estructura que guarda información del cliente, guardará el file descriptor del cliente.
            </p>
            <p>
                <b>@Salida:</b> Si el cliente no puede conectarse al devuelve false, si no devuelve true.
            </p>
        </div>
    
        <div class="functions">
            <h3>void salidaError (char *msg)</h3>
        <p>
            Imprime el error indicando el nombre del servidor y el mensaje. Se indica que hubo un estado de salida fallido (la función terminó con alguna falla).
        </p>
        <p>
            <b>@Parametro *msj:</b> Mensaje de error.
        </p>
        <p>
            <b>@Salida:</b> no tiene.
        </p>
        </div>

        <div class="functions">
            <h3>void sig_chld ()</h3>
            <p>
                Atiende la señal SIGCHLD para completar la destrucción del proceso hijo y envía un mensaje por consola del servidor y se muestra su PID.
            </p>
            <p>
                <b>@Parametro:</b> no tiene
            </p>
            <p>
                <b>@Salida:</b> no tiene.
            </p>
        </div>

        <div class="vinculos">
            <hr>
            <h2> Contenidos relacionados </h2>
            
            <ul>
                <li> <a href="./index.html">Pagina de inicio</a> </li>
                <li> <a href="./funciones-servicio.html">Funciones del servicio</a> </li>
                <li> <a href="./estructuras-includes.html">Estructuras, Includes y define</a> </li>
            </ul>
        </div>

    </body>

</html>